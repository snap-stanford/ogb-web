<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/ogb.github.io/assets/css/main.css">
    <link rel="stylesheet" href="/ogb.github.io/assets/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/ogb.github.io/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Node Property Prediction | Open Graph Benchmark</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Node Property Prediction" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The task is to predict properties of single nodes." />
<meta property="og:description" content="The task is to predict properties of single nodes." />
<link rel="canonical" href="http://localhost:4000/ogb.github.io/docs/nodeprop/" />
<meta property="og:url" content="http://localhost:4000/ogb.github.io/docs/nodeprop/" />
<meta property="og:site_name" content="Open Graph Benchmark" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-05T19:12:27-08:00" />
<script type="application/ld+json">
{"description":"The task is to predict properties of single nodes.","@type":"WebPage","url":"http://localhost:4000/ogb.github.io/docs/nodeprop/","headline":"Node Property Prediction","dateModified":"2020-03-05T19:12:27-08:00","datePublished":"2020-03-05T19:12:27-08:00","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="alternate" type="application/rss+xml" title="Open Graph Benchmark" href="http://localhost:4000/ogb.github.io/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/ogb.github.io/">
                <span><img src="/ogb.github.io/assets/img/OGB_pure.png" alt="Logo"></span> 
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <div class="navbar-right">
                <ul class="nav navbar-nav">
                <li ><a href="/ogb.github.io/docs/home/">Getting Started</a></li>
                <!-- <li ><a href="/ogb.github.io/docs/dataset_overview/">Datasets</a></li> -->
                <li ><a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    Datasets <span class="caret"></span>
                </a>
                    <ul class="dropdown-menu">
                      <li><a href="/ogb.github.io/docs/dataset_overview/">Overview</a></li>
                      <li class="divider"></li>
                      <li><a href="/ogb.github.io/docs/nodeprop/">Node Property Prediction</a></li>
                      <li class="divider"></li>
                      <li><a href="/ogb.github.io/docs/linkprop/">Link Property Prediction</a></li>
                      <li class="divider"></li>
                      <li><a href="/ogb.github.io/docs/graphprop/">Graph Property Prediction</a></li>
                    </ul>
                </li>
                <li ><a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    Leaderboards <span class="caret"></span>
                </a>
                    <ul class="dropdown-menu">
                      <li><a href="/ogb.github.io/docs/leader_overview/">Overview</a></li>
                      <li class="divider"></li>
                      <li><a href="/ogb.github.io/docs/leader_nodeprop/">Node Property Prediction</a></li>
                      <li class="divider"></li>
                      <li><a href="/ogb.github.io/docs/leader_linkprop/">Link Property Prediction</a></li>
                      <li class="divider"></li>
                      <li><a href="/ogb.github.io/docs/leader_graphprop/">Graph Property Prediction</a></li>
                    </ul>
                </li>
                <li ><a href="/">Paper</a></li>
<!--                 <li ><a href="/ogb.github.io/assets/slide/ogb-neurips-dec19.pdf">Slides</a></li> -->
                <li ><a href="/ogb.github.io/docs/team/">Contact & Team</a></li>
                <li ><a href="https://github.com/snap-stanford/ogb">Github</a></li>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
<!--         <div class="col-md-3">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
            Welcome
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-1" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/home/">Getting Started</a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
            Datasets
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse" id="collapse-2" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/dataset_overview/">OGB Dataset Overview</a>
          
            
            
            <a class="list-group-item active" href="/ogb.github.io/docs/nodeprop/">Node Property Prediction</a>
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/linkprop/">Link Property Prediction</a>
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/graphprop/">Graph Property Prediction</a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-3" aria-expanded="false" aria-controls="collapse-3">
            Leaderboard
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-3" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/leader_overview/">Leaderboards</a>
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/leader_nodeprop/">Leaderboards for Node Property Prediction</a>
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/leader_linkprop/">Leaderboards for Link Property Prediction</a>
          
            
            
            <a class="list-group-item " href="/ogb.github.io/docs/leader_graphprop/">Leaderboards for Graph Property Prediction</a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-4" aria-expanded="false" aria-controls="collapse-4">
            Frequently Asked Questions
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-4" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href=""></a>
          
        </div>
      </div>
    </div>
  
</div>

        </div> -->
        <div class="col-md-12">
            <h1>Node Property Prediction</h1>
            <div id="markdown-content-container"><h5 id="the-task-is-to-predict-properties-of-single-nodes">The task is to predict properties of single nodes.</h5>

<h3 id="summary">Summary</h3>

<h4 id="--datasets">- Datasets</h4>

<table>
  <thead>
    <tr>
      <th>Scale</th>
      <th>Name</th>
      <th>#Nodes</th>
      <th>#Edges*</th>
      <th>#Task</th>
      <th>Split Type</th>
      <th>Task Type</th>
      <th>Metric</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Medium</td>
      <td><a href="#ogbn-proteins">ogbn-proteins</a></td>
      <td>132,534</td>
      <td>79,122,504</td>
      <td>112</td>
      <td>Species</td>
      <td>Binary classification</td>
      <td>ROC-AUC</td>
    </tr>
    <tr>
      <td>Medium</td>
      <td><a href="#ogbn-products">ogbn-products</a></td>
      <td>2,449,029</td>
      <td>123,718,280</td>
      <td>1</td>
      <td>Time</td>
      <td>Multi-class classification</td>
      <td>Accuracy</td>
    </tr>
  </tbody>
</table>

<!-- | ogbn-wiki                         | TBD     | TBD            | Wikipedia hyperlinks                                       | Articles categories | TBD              |
 -->

<p>* Undirected edges are represented as bidirectional edges and counted as two edges. <br /> More datasets will be added in the future.</p>

<h4 id="--module">- Module</h4>
<p>We prepare different <a href="#loader">data loader</a> variants: (1) <a href="#pyg">Pytorch Geometric one</a> (2) <a href="#dgl">DGL one</a> and (3) <a href="#libagn">library-agnostic one</a>.
We also prepare a unified <a href="#eval">performance evaluator</a>.</p>

<hr />

<p><a name="ogbn-proteins"></a></p>
<h3 id="dataset-ogbn-proteins-leaderboard">Dataset <code class="language-plaintext highlighter-rouge">ogbn-proteins</code>: (<a href="../leader_nodeprop/#ogbn-proteins">Leaderboard</a>)</h3>

<p><strong>Graph:</strong> <code class="language-plaintext highlighter-rouge">ogbn-proteins</code> is an undirected, weighted, and typed graph (according to species), containing 132,534 nodes. Nodes represent proteins, and edges indicate different types of biologically meaningful associations between proteins (e.g., physical interactions, co-expression, homology) [1,2]. 
The edges come with 8-dimensional features, where each dimension represents the strength of each association type and takes the value between 0 and 1 (the larger the value is, the stronger the association is).
The proteins come from 8 species:  E. coli, A. thaliana, S. cerevisiae, C. elegans, D. melanogaster, D. rerio, H. sapiens, M. musculus. 
Each node comes with an 8-dimensional one-hot feature indicating which species the corresponding protein comes from.</p>

<p><strong>Prediction task:</strong> The task is to predict the presence of protein functions (multi-label binary classification). There are 112 kinds of labels to predict in total.</p>

<p><strong>Dataset splitting:</strong> We split the protein nodes into training/validation/test sets according to species from which the proteins come from.</p>

<p><strong>Note:</strong> Details of this dataset will likely change. The dataset is not yet finalized as a benchmark.</p>

<h4 id="references">References</h4>
<p>[1] Szklarczyk, D., Gable, A.L., Lyon, D., Junge, A., Wyder, S., Huerta-Cepas, J., Simonovic, M., Doncheva, N.T., Morris, J.H., Bork, P. and Jensen, L.J., 2018. STRING v11: proteinâ€“protein association networks with increased coverage, supporting functional discovery in genome-wide experimental datasets. Nucleic Acids Research, 47(D1), pp.D607-D613. <br />
[2] Ashburner, M., Ball, C.A., Blake, J.A., Botstein, D., Butler, H., Cherry, J.M., Davis, A.P., Dolinski, K., Dwight, S.S., Eppig, J.T. and Harris, M.A., 2000. Gene ontology: tool for the unification of biology. Nature Genetics, 25(1), p.25.</p>

<hr />
<p><a name="ogbn-products"></a></p>
<h3 id="dataset-ogbn-products-leaderboard">Dataset <code class="language-plaintext highlighter-rouge">ogbn-products</code>: (<a href="../leader_nodeprop/#ogbn-products">Leaderboard</a>)</h3>

<p><strong>Graph:</strong> <code class="language-plaintext highlighter-rouge">ogbn-products</code> is an undirected, unweighted graph, containing 2449029 nodes, representing an Amazon product co-purchase graph [1]. Nodes represent products sold in Amazon, and edges between two products indicate that the products are purchased together. We follow [2] to process node features and target categories. Specifically, node features are generated by extracting bag-of-words features from the product descriptions followed by Principal Component Analysis to reduce the dimension to be 100.</p>

<p><strong>Prediction task:</strong> The task is multi-class classification of products into their categories, where top-level 47 categories are used for target labels, and each product is assigned to one of the 47 categories.</p>

<p><strong>Dataset splitting:</strong> We consider a more challenging and realistic dataset splitting that is different from [2]. First, unlike [2] that uses 90% of nodes for training and 10% of nodes for testing (no validation set is used), we consider a more challenging semi-supervised classification scenario, where only 10% of nodes are labeled, 2% of nodes can be used for validation. The goal is to make predictions on the rest of the 88% nodes.
Furthermore, different from [2] that uses random node splitting, we use the sales ranking (popularity) to split nodes into train/validation/test sets. Specifically, we sort the products according to their sales ranking and use the top 10% for training, next top 2% for validation, and the rest for testing. This respects the real application where labels are first assigned to important nodes in the network, and machine learning is subsequently used to make predictions on less important ones.</p>

<p><strong>Note:</strong> Details will likely change. The dataset is not yet finalized as a benchmark.</p>

<h4 id="references-1">References</h4>
<p>[1] http://manikvarma.org/downloads/XC/XMLRepository.html <br />
[2] Chiang, W. L., Liu, X., Si, S., Li, Y., Bengio, S., &amp; Hsieh, C. J. Cluster-GCN: An Efficient Algorithm for Training Deep and Large Graph Convolutional Networks. SIGKDD 2019.</p>

<hr />
<p><a name="loader"></a></p>

<h3 id="data-loader">Data Loader</h3>

<p>To load a dataset, replace <code class="language-plaintext highlighter-rouge">d_name</code> with the dataset name (e.g., <code class="language-plaintext highlighter-rouge">"ogbn-proteins"</code>).</p>

<p><a name="pyg"></a></p>

<h4 id="pytorch-geometric-loader">Pytorch Geometric Loader</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">ogb.nodeproppred.dataset_pyg</span> <span class="kn">import</span> <span class="n">PygNodePropPredDataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">PygNodePropPredDataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">d_name</span><span class="p">)</span> 
<span class="n">num_tasks</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">num_tasks</span> <span class="c1"># obtaining the number of prediction tasks in a dataset
</span>
<span class="n">splitted_idx</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_idx_split</span><span class="p">()</span>
<span class="n">train_idx</span><span class="p">,</span> <span class="n">valid_idx</span><span class="p">,</span> <span class="n">test_idx</span> <span class="o">=</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"train"</span><span class="p">],</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"valid"</span><span class="p">],</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"test"</span><span class="p">]</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># pyg graph object
</span></code></pre></div></div>

<p><a name="dgl"></a></p>

<h4 id="dgl-loader">DGL Loader</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">ogb.nodeproppred.dataset_dgl</span> <span class="kn">import</span> <span class="n">DglNodePropPredDataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">NodePropPredDataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">d_name</span><span class="p">)</span>
<span class="n">num_tasks</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">num_tasks</span> <span class="c1"># obtaining the number of prediction tasks in a dataset
</span>
<span class="n">splitted_idx</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_idx_split</span><span class="p">()</span>
<span class="n">train_idx</span><span class="p">,</span> <span class="n">valid_idx</span><span class="p">,</span> <span class="n">test_idx</span> <span class="o">=</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"train"</span><span class="p">],</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"valid"</span><span class="p">],</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"test"</span><span class="p">]</span>
<span class="n">graph</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># graph: dgl graph object, label: torch tensor of shape (num_nodes, num_tasks)
</span></code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">{train,valid,test}_idx</code> are torch tensors of shape <code class="language-plaintext highlighter-rouge">(num_nodes,)</code>, representing the node indices assigned to training/validation/test sets.
Prediction target in the Pytorch Geometric dataset can be accessed by <code class="language-plaintext highlighter-rouge">graph.y</code>, which is a torch tensor of shape <code class="language-plaintext highlighter-rouge">(num_nodes, num_tasks)</code>, where the i-th row represents the target labels of i-th node.</p>

<p><a name="libagn"></a></p>

<h4 id="library-agnostic-loader">Library-Agnostic Loader</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">ogb.nodeproppred.dataset</span> <span class="kn">import</span> <span class="n">NodePropPredDataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">NodePropPredDataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">d_name</span><span class="p">)</span>
<span class="n">num_tasks</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">num_tasks</span> <span class="c1"># obtaining the number of prediction tasks in a dataset
</span>
<span class="n">splitted_idx</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_idx_split</span><span class="p">()</span>
<span class="n">train_idx</span><span class="p">,</span> <span class="n">valid_idx</span><span class="p">,</span> <span class="n">test_idx</span> <span class="o">=</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"train"</span><span class="p">],</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"valid"</span><span class="p">],</span> <span class="n">splitted_idx</span><span class="p">[</span><span class="s">"test"</span><span class="p">]</span>
<span class="n">graph</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># graph: library-agnostic graph object
</span></code></pre></div></div>
<p>The library-agnostic graph object is a dictionary containing the following keys: <code class="language-plaintext highlighter-rouge">edge_index</code>, <code class="language-plaintext highlighter-rouge">edge_feat</code>, <code class="language-plaintext highlighter-rouge">node_feat</code>, and <code class="language-plaintext highlighter-rouge">num_nodes</code>, which are detailed below.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">edge_index</code>: numpy arrays of shape <code class="language-plaintext highlighter-rouge">(2, num_edges)</code>, where each column represents an edge. The first row and the second row represent the indices of source and target nodes. Undirected edges are represented by bi-directional edges.</li>
  <li><code class="language-plaintext highlighter-rouge">edge_feat</code>: numpy arrays of shape <code class="language-plaintext highlighter-rouge">(num_edges, edgefeat_dim)</code>, where <code class="language-plaintext highlighter-rouge">edgefeat_dim</code> is the dimensionality of edge features and i-th row represents the feature of i-th edge. This can be <code class="language-plaintext highlighter-rouge">None</code> if no input edge features are available.</li>
  <li><code class="language-plaintext highlighter-rouge">node_feat</code>: numpy arrays of shape <code class="language-plaintext highlighter-rouge">(num_nodes, nodefeat_dim)</code>, where <code class="language-plaintext highlighter-rouge">nodefeat_dim</code> is the dimensionality of node features and i-th row represents the feature of i-th node. This can be <code class="language-plaintext highlighter-rouge">None</code> if no input node features are available.</li>
  <li><code class="language-plaintext highlighter-rouge">num_nodes</code>: number of nodes in the graph.</li>
</ul>

<hr />
<p><a name="eval"></a></p>

<h3 id="performance-evaluator">Performance Evaluator</h3>

<p>Evaluators are customized for each dataset.
We require users to pass a pre-specified format to the evaluator.
First, please learn the input and output format specification of the evaluator as follows.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">ogb.nodeproppred</span> <span class="kn">import</span> <span class="n">Evaluator</span>

<span class="n">evaluator</span> <span class="o">=</span> <span class="n">Evaluator</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">d_name</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">evaluator</span><span class="o">.</span><span class="n">expected_input_format</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">evaluator</span><span class="o">.</span><span class="n">expected_output_format</span><span class="p">)</span> 
</code></pre></div></div>

<p>Then, you can pass the input dictionary (denoted by <code class="language-plaintext highlighter-rouge">input_dict</code> below) of the specified format, and get the performance of your prediction.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># In most cases, input_dict is
# input_dict = {"y_true": y_true, "y_pred": y_pred}
</span><span class="n">result_dict</span> <span class="o">=</span> <span class="n">evaluator</span><span class="o">.</span><span class="nb">eval</span><span class="p">(</span><span class="n">input_dict</span><span class="p">)</span>
</code></pre></div></div>
</div>
            <!-- <hr> -->
            <!-- 





  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/ogb.github.io/docs/dataset_overview/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/ogb.github.io/docs/linkprop/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
      </ul>
    <div class="clear"></div>
    
 -->
        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Open Graph Benchmark 2020 |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = '/ogb.github.io'
</script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="/ogb.github.io/assets/js/bootstrap.min.js "></script>
<script src="/ogb.github.io/assets/js/typeahead.bundle.min.js "></script>

<script src="/ogb.github.io/assets/js/main.js "></script>

</body>

</html>
